<div class="disk" data-disk="<%- disk.name %>">
  <div class="disk-header">
    <div class="disk-name pull-left"><%- disk.name %></div>
    <% var diskSize = disk.size ? disk.size / Math.pow(1000, 3) : 0 %>
    <div class="disk-size pull-right">Total space: <%= diskSize ? diskSize < 100 ? diskSize.toFixed(1) + 'GB' : (diskSize / 1000).toFixed(1) + 'TB' : '?TB' %></div>
  </div>
  <div class="disk-visual">
    <% var unallocatedWidth = 100, unallocatedSize = Math.round(diskSize) %>
    <% _.each(_.keys(volumeGroups), function(group) { %>
      <% var width = disk.size ? Math.round(disk.volume_groups[group] / disk.size * 100) : 0 %>
      <% if (group != 'unallocated') unallocatedWidth -= width %>
      <div class="<%= group %>" data-group="<%= group %>" style="width: <%= _.isNaN(width) ? unallocatedWidth : width %>%">
        <% var groupSize = Math.round(disk.volume_groups[group] / Math.pow(1000, 3)) %>
        <% if (group != 'unallocated') unallocatedSize -= groupSize %>
        <%= volumeGroups[group].label %><br/><%= _.isNaN(groupSize) ? unallocatedSize : groupSize %>GB
        <% if (group != 'unallocated') { %>
          <span class="delete-volume-group hide">&times;</span>
        <% } %>
      </div>
    <% }) %>
  </div>
  <div class="disk-edit-volume-group-form hide">
    <fieldset>
    <legend>Volume Groups</legend>
    <label>Select Group Purpose</label>
    <select>
      <% _.each(_.keys(volumeGroups), function(group) { %>
        <% if (_.contains(volumeGroups[group].roles, nodeRole)) { %>
          <option value="<%= group %>"><%= volumeGroups[group].label %></option>
        <% } %>
      <% }) %>
    </select>
    <% _.each(_.keys(volumeGroups), function(group) { %>
      <% if (_.contains(volumeGroups[group].roles, nodeRole)) { %>
        <label>Enter Volume Group Size, GB</label>
        <input type="text" class="input-mini" value="<%= Math.round(volumeGroups[group].size / Math.pow(1000, 3)) %>" />
      <% } %>
    <% }) %>
  </fieldset>
  </div>
</div>
